<!DOCTYPE html><html lang=en manifest=/manifest.appcache><head><meta charset=utf-8><title>Backend &middot; Vanilla Documentation</title><meta name=description content=""><meta name=keywords content=""><meta name=viewport content="width=device-width"><meta name=google-site-verification content=IWfWjN_f_82e7heCa9D0SJRhIf8aZdPNKZm_ympcB54><link rel=stylesheet href=/assets/main.4f4cd87b.css><body><div id=top></div><nav class="navbar navbar-default navbar-static-top" role=navigation><div class=container><div class=navbar-header><a class=navbar-brand href="/"><img class=logo src=/assets/img/logo.9bdefa97.svg alt="Vanilla Forums" width=102 height=41> Docs</a></div><div class="collapse navbar-collapse"><div class="navbar-form navbar-left"><div class="dropdown js-search" role=search><div class=form-group><input class="form-control js-search-input" id=docs-search title="Search the documentation" placeholder=Search></div><ul class="dropdown-menu dropdown-search-results js-search-results"><li><a><span class=title></span> <span class=categories></span></a></li></ul></div></div><ul class="nav navbar-nav navbar-right"><li><a href=http://vanillaforums.com>Cloud Hosted Community</a></li><li><a href=http://vanillaforums.org>Open Source Community</a></li></ul></div></div></nav><div class=container><ol class=breadcrumb><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href="/" itemprop=url><span itemprop=title>Home</span></a></li><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href="/developers/" itemprop=url><span itemprop=title>Developers</span></a></li><li class=active itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span itemprop=title>Backend</span></li></ol><div class=row><div class=col-sm-3><nav class="docs-nav js-docs-nav" role=navigation><ul class="nav nav-stacked"><li><a href="/addons/">Addons</a><ul class="nav nav-stacked"><li><a href="/addons/badges/">Badges</a><ul class="nav nav-stacked"><li><a href="/addons/badges/adding-and-editing-badges/">Adding and Editing Badges</a></li><li><a href="/addons/badges/giving-and-requesting-badges/">Giving and Requesting Badges</a></li></ul></li><li><a href="/addons/warnings-and-notes/">Warnings &amp; Notes</a><ul class="nav nav-stacked"><li><a href="/addons/warnings-and-notes/adding-and-editing-user-notes/">Adding and Editing User Notes</a></li><li><a href="/addons/warnings-and-notes/upgrading-from-warnings/">Upgrading from Warnings</a></li><li><a href="/addons/warnings-and-notes/warning-a-user/">Warning a User</a></li></ul></li><li><a href="/addons/gigya/">Gigya Sign In</a></li><li><a href="/addons/googleplus/">Google Plus</a></li><li><a href="/addons/groups/">Groups</a><ul class="nav nav-stacked"><li><a href="/addons/groups/managing-groups/">Managing Groups</a></li></ul></li><li><a href="/addons/ideation/">Ideation</a></li><li><a href="/addons/pockets/">Pockets</a></li><li><a href="/addons/forummerge/">Forum Merge</a></li><li><a href="/addons/reactions/">Reactions</a><ul class="nav nav-stacked"><li><a href="/addons/reactions/adding-and-editing-reactions/">Adding and Editing Reactions</a></li><li><a href="/addons/reactions/curating-with-reactions/">Curating with Reactions</a></li></ul></li><li><a href="/addons/redirector/">Redirector</a></li><li><a href="/addons/reporting/">Reporting</a></li><li><a href="/addons/statistics/">Statistics</a></li><li><a href="/addons/vanilla-pop/">Vanilla Pop</a><ul class="nav nav-stacked"><li><a href="/addons/vanilla-pop/site-hub/">Vanilla Pop on the Site Hub</a></li></ul></li><li><a href="/addons/ranks/">Ranks</a><ul class="nav nav-stacked"><li><a href="/addons/ranks/adding-and-editing-ranks/">Adding and Editing Ranks</a></li><li><a href="/addons/ranks/applying-ranks-over-sso/">Applying Ranks over SSO</a></li><li><a href="/addons/ranks/using-ranks-as-incentives/">Using Ranks as Incentives</a></li><li><a href="/addons/ranks/using-ranks-to-defeat-spam-or-abuse/">Using Ranks to Defeat Spam or Abuse</a></li></ul></li></ul></li><li><a href="/api/">API</a><ul class="nav nav-stacked"><li><a href="/api/smart-id/">Smart ID</a></li><li><a href="/api/categories/">Categories</a></li><li><a href="/api/comments/">Comments</a></li><li><a href="/api/discussions/">Discussions</a></li><li><a href="/api/forum-administration/">Forum Administration</a></li><li><a href="/api/roles/">Roles</a></li><li><a href="/api/site-hub/">Site Hub</a></li><li><a href="/api/use-api-on-external-site/">API on External Sites</a></li></ul></li><li><a href="/cloud/">Cloud Services</a><ul class="nav nav-stacked"><li><a href="/cloud/integration/">Integration Services</a></li><li><a href="/cloud/logging/">Logging</a></li><li><a href="/cloud/migration/">Migration Services</a></li><li><a href="/cloud/multisite/">Multisite Features</a><ul class="nav nav-stacked"><li><a href="/cloud/multisite/sync/">Multisite Features</a></li></ul></li><li><a href="/cloud/releases/">Releases</a></li><li><a href="/cloud/repo/">Repository</a></li><li><a href="/cloud/ssl/">Setting up SSL (https)</a></li><li><a href="/cloud/staging/">Staging Site</a></li><li><a href="/cloud/support/">Support</a></li><li><a href="/cloud/theming/">Theming Services</a></li></ul></li><li class=active><a href="/developers/">Developers</a><ul class="nav nav-stacked"><li class=active><a href="/developers/backend/">Backend</a></li><li><a href="/developers/troubleshooting/">Troubleshooting</a></li><li><a href="/developers/community/">Community</a></li><li><a href="/developers/configuration/">Configuration</a><ul class="nav nav-stacked"><li><a href="/developers/configuration/banner/">Banner Settings</a></li><li><a href="/developers/configuration/dashboard/">Dashboard</a></li><li><a href="/developers/configuration/homepage/">Homepage Settings</a></li><li><a href="/developers/configuration/message/">Messages</a></li><li><a href="/developers/configuration/using/">Using The Config</a></li></ul></li><li><a href="/developers/contributing/">Contributing</a><ul class="nav nav-stacked"><li><a href="/developers/contributing/coding-standard/">Coding Standard</a></li><li><a href="/developers/contributing/conduct/">Code of Conduct</a></li><li><a href="/developers/contributing/pull-requests/">Pull Requests</a></li></ul></li><li><a href="/developers/data-privacy/">Data privacy</a></li><li><a href="/developers/framework/">Framework</a><ul class="nav nav-stacked"><li><a href="/developers/framework/assets/">Assets</a></li><li><a href="/developers/framework/views/">Views</a></li><li><a href="/developers/framework/database/">Database access</a></li><li><a href="/developers/framework/datasets/">Datasets</a></li><li><a href="/developers/framework/email/">Email</a></li><li><a href="/developers/framework/helpers/">Helpers</a></li><li><a href="/developers/framework/controllers/">Controllers &amp; URLs</a></li><li><a href="/developers/framework/inform/">Inform Messages</a></li><li><a href="/developers/framework/models/">Models, Forms, &amp; Validation</a></li><li><a href="/developers/framework/modules/">Modules</a></li><li><a href="/developers/framework/permissions/">Permissions</a></li><li><a href="/developers/framework/requests/">Requests</a></li><li><a href="/developers/framework/i18n/">Internationalization &amp; Localization</a></li></ul></li><li><a href="/developers/changelog/">Changelog</a></li><li><a href="/developers/installation/">Installation</a></li><li><a href="/developers/locales/">Locales</a></li><li><a href="/developers/plugins/">Plugins</a><ul class="nav nav-stacked"><li><a href="/developers/plugins/quickstart/">Plugin Quickstart</a></li></ul></li><li><a href="/developers/routes/">Routes</a></li><li><a href="/developers/tools/">Developer Tools</a></li><li><a href="/developers/importing/">Importing</a><ul class="nav nav-stacked"><li><a href="/developers/importing/build/">Building new porters</a></li><li><a href="/developers/importing/porter/">Vanilla Porter</a></li><li><a href="/developers/importing/support/">Supported platforms</a></li></ul></li></ul></li><li><a href="/features/">Features</a><ul class="nav nav-stacked"><li><a href="/features/accessibility/">Accessibility</a></li><li><a href="/features/categories/">Categories</a></li><li><a href="/features/comments/">Universal Comments</a></li><li><a href="/features/emails/">Emails</a></li><li><a href="/features/embedding/">Embedding</a><ul class="nav nav-stacked"><li><a href="/features/embedding/advanced/">Advanced Embedding</a></li></ul></li><li><a href="/features/emoji/">Emoji</a></li><li><a href="/features/notifications/">Notifications</a></li><li><a href="/features/roles-permissions/">Roles &amp; Permissions</a><ul class="nav nav-stacked"><li><a href="/features/roles-permissions/default-role-types/">Default Role Types</a></li></ul></li><li><a href="/features/sso/">Single Sign-On (SSO)</a><ul class="nav nav-stacked"><li><a href="/features/sso/jsconnect/">SSO with jsConnect</a><ul class="nav nav-stacked"><li><a href="/features/sso/jsconnect/embed/">Embedded</a></li><li><a href="/features/sso/jsconnect/overview/">Technical Overview</a></li><li><a href="/features/sso/jsconnect/seamless/">Seamless Setup</a></li></ul></li><li><a href="/features/sso/oauth/">SSO with OAuth</a></li><li><a href="/features/sso/saml/">SSO with SAML</a></li></ul></li><li><a href="/features/wordpress/">WordPress Integration</a><ul class="nav nav-stacked"><li><a href="/features/wordpress/using-comments/">Using Comments</a></li><li><a href="/features/wordpress/wishlist/">WishList Integration</a></li></ul></li></ul></li><li><a href="/theming/">Theming</a><ul class="nav nav-stacked"><li><a href="/theming/css/">Theming CSS</a></li><li><a href="/theming/hooks/">Theming Hooks</a></li><li><a href="/theming/quickstart/">Theming Quickstart</a></li><li><a href="/theming/smarty/">Smarty</a><ul class="nav nav-stacked"><li><a href="/theming/smarty/conditionals/">Smarty Conditionals</a></li><li><a href="/theming/smarty/functions/">Smarty Functions</a><ul class="nav nav-stacked"><li><a href="/theming/smarty/functions/asset/">{asset}</a></li><li><a href="/theming/smarty/functions/text/">{text}</a></li><li><a href="/theming/smarty/functions/custom-menu/">{custom_menu}</a></li><li><a href="/theming/smarty/functions/event/">{event}</a></li><li><a href="/theming/smarty/functions/i18n/">{t}</a></li><li><a href="/theming/smarty/functions/include-file/">{include_file}</a></li><li><a href="/theming/smarty/functions/link/">{link}</a></li><li><a href="/theming/smarty/functions/breadcrumbs/">{breadcrumbs}</a></li><li><a href="/theming/smarty/functions/mobile-logo/">{mobile_logo}</a></li><li><a href="/theming/smarty/functions/module/">{module}</a></li><li><a href="/theming/smarty/functions/page-links/">Page Links</a></li><li><a href="/theming/smarty/functions/permission/">{permission}</a></li><li><a href="/theming/smarty/functions/pocket/">{pocket}</a></li><li><a href="/theming/smarty/functions/searchbox/">{searchbox}</a></li><li><a href="/theming/smarty/functions/logo/">{logo}</a></li></ul></li><li><a href="/theming/smarty/modifiers/">Smarty Modifiers</a></li></ul></li><li><a href="/theming/themeoptions/">Theme Options</a></li><li><a href="/theming/views/">Theming Views</a></li></ul></li></ul><p class=hidden-xs><a class=text-muted href=#top>^ Back to top</a></p></nav></div><div class=col-sm-9><div class="edit-doc pull-right hidden-xs"><a class="btn btn-default btn-xs" href=https://github.com/vanilla/vanilladocs/edit/master/docs/developers/backend.html.md>Improve document</a></div><article class=markdown-body role=article><h1 id=backend-setup>Backend setup</h1><h2 id=server>Server</h2><p>Vanilla works with Apache, nginx (our preference) or IIS with proper configuration. The core team does not officially support IIS but accept bug reports and patches related to it.</p><h3 id=apache>Apache</h3><p>Vanilla includes an <code>.htaccess</code> file for out-of-box Apache support. You may need to edit the htaccess file as indicated for subfolder usage. Obviously, htaccess files must be enabled for your web root.</p><h3 id=nginx>nginx</h3><p>The key to specifically running Vanilla under nginx is getting the basic rewrite rule in <code>nginx.conf</code> correct. These are by no means complete conf files nor an nginx tutorial, these are simply excerpts of the Vanilla-specific rules needed.</p><p>An example of <strong>Vanilla 2.2 and earlier</strong> running in the root web folder:</p><pre class=highlight><code class="hljs nginx">    <span class=hljs-title>location</span> <span class=hljs-variable>@site</span> {
       <span class=hljs-title>rewrite</span><span class=hljs-regexp> ^</span> /index.php?p=<span class=hljs-variable>$uri</span>&amp;<span class=hljs-variable>$args</span> <span class=hljs-built_in>last</span>;
    }

    <span class=hljs-title>location</span> / {
       <span class=hljs-title>try_files</span> <span class=hljs-variable>$uri</span> <span class=hljs-variable>@site</span>;
    }
</code></pre><p>An example of <strong>Vanilla 2.2 and earlier</strong> in a subfolder:</p><pre class=highlight><code class="hljs nginx">    <span class=hljs-title>location</span> /subfolder {
       <span class=hljs-title>try_files</span> <span class=hljs-variable>$uri</span> <span class=hljs-variable>@subfolder</span>;
    }

    <span class=hljs-title>location</span> <span class=hljs-variable>@subfolder</span> {
       <span class=hljs-title>rewrite</span><span class=hljs-regexp> ^/subfolder(/.*)</span> /subfolder/index.php?p=<span class=hljs-variable>$1</span>&amp;<span class=hljs-variable>$args</span> <span class=hljs-built_in>last</span>;
    }
</code></pre><p>In <strong>Vanilla 2.3</strong>, these rules change because the <code>p</code> parameter has been removed in favor of strict usage of <code>PATH_INFO</code>, and therefore no rewrite is needed. However, it&#39;s important that your fastcgi params are setup to pass this information to PHP.</p><h3 id=iis>IIS</h3><p>We do not officially support this server, but information and help may be provided on our <a href=https://vanillaforums.org/discussions>community forum</a>. We welcome additions to this documentation.</p><h2 id=caching>Caching</h2><h3 id=opcache>OPcache</h3><p>OPcache replaced APC as the preferred opcode caching solution for PHP as of 5.5. Vanilla is compatible with OPcache and no additional configuration is necessary beyond simply enabling it.</p><h3 id=memcached>Memcached</h3><p>Vanilla has support for both Memcache and Memcached, but we strongly recommend Memcached if you have an option. It does require additional configuration beyond installing and enabling it in PHP.</p><pre class=highlight><code class="hljs markdown">$Configuration[<span class=hljs-link_label>'Cache'</span>][<span class=hljs-link_reference>'Enabled'</span>] = true;
$Configuration[<span class=hljs-link_label>'Cache'</span>][<span class=hljs-link_reference>'Method'</span>] = 'memcached';
$Configuration[<span class=hljs-link_label>'memcached'</span>][<span class=hljs-link_reference>'Store'</span>] = 'localhost';
</code></pre><p>You can also specify a port for memcached. Store, e.g.: <code>localhost:11211</code>.</p><p>Lastly, you can optionally set Memcached options directly in your Vanilla config. Here are some example settings you may wish to use. Note that these require Memcached to be enabled on your server or else adding these to your config will cause errors.</p><pre class=highlight><code class="hljs elixir"><span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_COMPRESSION</span>] = <span class=hljs-keyword>true</span>;
<span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_DISTRIBUTION</span>] = <span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:DISTRIBUTION_CONSISTENT</span>;
<span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_LIBKETAMA_COMPATIBLE</span>] = <span class=hljs-keyword>true</span>;
<span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_NO_BLOCK</span>] = <span class=hljs-keyword>true</span>;
<span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_TCP_NODELAY</span>] = <span class=hljs-keyword>true</span>;
<span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_CONNECT_TIMEOUT</span>] = <span class=hljs-number>1000</span>;
<span class=hljs-variable>$Configuration</span>[<span class=hljs-string>'Cache.Memcached.Option.'</span>.<span class=hljs-constant>Memcached:</span><span class=hljs-symbol>:OPT_SERVER_FAILURE_LIMIT</span>] = <span class=hljs-number>2</span>;
</code></pre></article></div></div></div><footer class="footer js-footer"><div class=jumbotron><div class=container><div class=row><div class=col-sm-6><h3><a href=http://vanillaforums.com>Cloud Hosting</a></h3><p><strong>We believe that online communities should be intuitive, engaging and true to your brand.</strong> Vanilla allows you to create a customized community that rewards positive participation, automatically curates content and lets members drive moderation.</p></div><div class=col-sm-6><h3><a href=http://vanillaforums.org>Open Source</a></h3><p>Vanilla provides cloud and open source community forum software that powers discussion forums on more than 700,000 sites. Built for flexibility and integration, <strong>Vanilla is the best, most powerful community solution in the world.</strong></p></div></div></div></div><div class=footer-copyright><div class=container><p class=text-center>Copyright &copy; 2009-2016 <a href=http://vanillaforums.com>Vanilla Forums Inc.</a> All rights reserved.</p><ul class="list-inline text-center hidden-xs"><li><a href=http://docs.vanillaforums.com>Docs</a></li><li><a href=http://blog.vanillaforums.com>Blog</a></li><li><a href=http://vanillaforums.com>Cloud</a></li><li><a href=http://vanillaforums.org>Community</a></li><li><a href=https://github.com/vanilla>GitHub</a></li><li><a href=https://github.com/vanilla/vanilla/issues>Issues</a></li></ul></div></div></footer><script src=/search.c5169d19.json id=search-manifest type=application/json></script><script src=/assets/main.0da2389c.js></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-12713112-1","auto"),ga("send","pageview");</script>