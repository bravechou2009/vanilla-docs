<!DOCTYPE html><html lang=en manifest=/manifest.appcache><head><meta charset=utf-8><title>Advanced Embedding &middot; Vanilla Documentation</title><meta name=description content=""><meta name=keywords content=""><meta name=viewport content="width=device-width"><meta name=google-site-verification content=IWfWjN_f_82e7heCa9D0SJRhIf8aZdPNKZm_ympcB54><link rel=stylesheet href=/assets/main.d43ae646.css><body><div id=top></div><nav class="navbar navbar-default navbar-static-top" role=navigation><div class=container><div class=navbar-header><a class=navbar-brand href="/"><img class=logo src=/assets/img/logo.9bdefa97.svg alt="Vanilla Forums" width=102 height=41> Docs</a></div><div class="collapse navbar-collapse"><div class="navbar-form navbar-left"><div class="dropdown js-search" role=search><div class=form-group><input class="form-control js-search-input" id=docs-search title="Search the documentation" placeholder=Search></div><ul class="dropdown-menu dropdown-search-results js-search-results"><li><a><span class=title></span> <span class=categories></span></a></li></ul></div></div><ul class="nav navbar-nav navbar-right"><li><a href=http://vanillaforums.com>Cloud Hosted Community</a></li><li><a href=http://vanillaforums.org>Open Source Community</a></li></ul></div></div></nav><div class=container><ol class=breadcrumb><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href="/" itemprop=url><span itemprop=title>Home</span></a></li><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href="/features/" itemprop=url><span itemprop=title>Features</span></a></li><li itemscope itemtype=http://data-vocabulary.org/Breadcrumb><a href="/features/embedding/" itemprop=url><span itemprop=title>Embedding</span></a></li><li class=active itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span itemprop=title>Advanced Embedding</span></li></ol><div class=row><div class=col-sm-3><nav class="docs-nav js-docs-nav" role=navigation><ul class="nav nav-stacked"><li><a href="/addons/">Addons</a><ul class="nav nav-stacked"><li><a href="/addons/badges/">Badges</a><ul class="nav nav-stacked"><li><a href="/addons/badges/adding-and-editing-badges/">Adding and Editing Badges</a></li><li><a href="/addons/badges/giving-and-requesting-badges/">Giving and Requesting Badges</a></li></ul></li><li><a href="/addons/warnings-and-notes/">Warnings &amp; Notes</a><ul class="nav nav-stacked"><li><a href="/addons/warnings-and-notes/adding-and-editing-user-notes/">Adding and Editing User Notes</a></li><li><a href="/addons/warnings-and-notes/upgrading-from-warnings/">Upgrading from Warnings</a></li><li><a href="/addons/warnings-and-notes/warning-a-user/">Warning a User</a></li></ul></li><li><a href="/addons/gigya/">Gigya Sign In</a></li><li><a href="/addons/googleplus/">Google Plus</a></li><li><a href="/addons/groups/">Groups</a><ul class="nav nav-stacked"><li><a href="/addons/groups/managing-groups/">Managing Groups</a></li></ul></li><li><a href="/addons/pockets/">Pockets</a></li><li><a href="/addons/forummerge/">Forum Merge</a></li><li><a href="/addons/reactions/">Reactions</a><ul class="nav nav-stacked"><li><a href="/addons/reactions/adding-and-editing-reactions/">Adding and Editing Reactions</a></li><li><a href="/addons/reactions/curating-with-reactions/">Curating with Reactions</a></li></ul></li><li><a href="/addons/redirector/">Redirector</a></li><li><a href="/addons/reporting/">Reporting</a></li><li><a href="/addons/statistics/">Statistics</a></li><li><a href="/addons/vanilla-pop/">Vanilla Pop</a></li><li><a href="/addons/ranks/">Ranks</a><ul class="nav nav-stacked"><li><a href="/addons/ranks/adding-and-editing-ranks/">Adding and Editing Ranks</a></li><li><a href="/addons/ranks/applying-ranks-over-sso/">Applying Ranks over SSO</a></li><li><a href="/addons/ranks/using-ranks-as-incentives/">Using Ranks as Incentives</a></li><li><a href="/addons/ranks/using-ranks-to-defeat-spam-or-abuse/">Using Ranks to Defeat Spam or Abuse</a></li></ul></li></ul></li><li><a href="/api/">API</a><ul class="nav nav-stacked"><li><a href="/api/smart-id/">Smart ID</a></li><li><a href="/api/categories/">Categories</a></li><li><a href="/api/comments/">Comments</a></li><li><a href="/api/discussions/">Discussions</a></li><li><a href="/api/forum-administration/">Forum Administration</a></li><li><a href="/api/roles/">Roles</a></li><li><a href="/api/site-hub/">Site Hub</a></li><li><a href="/api/use-api-on-external-site/">API on External Sites</a></li></ul></li><li><a href="/cloud/">Cloud Services</a><ul class="nav nav-stacked"><li><a href="/cloud/integration/">Integration Services</a></li><li><a href="/cloud/logging/">Logging</a></li><li><a href="/cloud/migration/">Migration Services</a></li><li><a href="/cloud/multisite/">Multisite Features</a><ul class="nav nav-stacked"><li><a href="/cloud/multisite/sync/">Multisite Features</a></li></ul></li><li><a href="/cloud/repo/">Repository</a></li><li><a href="/cloud/ssl/">Setting up SSL (https)</a></li><li><a href="/cloud/staging/">Staging Site</a></li><li><a href="/cloud/support/">Support</a></li><li><a href="/cloud/theming/">Theming Services</a></li></ul></li><li><a href="/developers/">Developers</a><ul class="nav nav-stacked"><li><a href="/developers/changelog/">Changelog</a></li><li><a href="/developers/troubleshooting/">Troubleshooting</a></li><li><a href="/developers/configuration/">Configuration</a><ul class="nav nav-stacked"><li><a href="/developers/configuration/banner/">Banner Settings</a></li><li><a href="/developers/configuration/dashboard/">Dashboard</a></li><li><a href="/developers/configuration/homepage/">Homepage Settings</a></li><li><a href="/developers/configuration/message/">Messages</a></li><li><a href="/developers/configuration/using/">Using The Config</a></li></ul></li><li><a href="/developers/contributing/">Contributing</a><ul class="nav nav-stacked"><li><a href="/developers/contributing/coding-standard/">Coding Standard</a></li><li><a href="/developers/contributing/conduct/">Code of Conduct</a></li><li><a href="/developers/contributing/pull-requests/">Pull Requests</a></li></ul></li><li><a href="/developers/data-privacy/">Data privacy</a></li><li><a href="/developers/framework/">Framework</a><ul class="nav nav-stacked"><li><a href="/developers/framework/assets/">Assets</a></li><li><a href="/developers/framework/views/">Views</a></li><li><a href="/developers/framework/database/">Database access</a></li><li><a href="/developers/framework/datasets/">Datasets</a></li><li><a href="/developers/framework/email/">Email</a></li><li><a href="/developers/framework/helpers/">Helpers</a></li><li><a href="/developers/framework/controllers/">Controllers &amp; URLs</a></li><li><a href="/developers/framework/inform/">Inform Messages</a></li><li><a href="/developers/framework/models/">Models, Forms, &amp; Validation</a></li><li><a href="/developers/framework/modules/">Modules</a></li><li><a href="/developers/framework/permissions/">Permissions</a></li><li><a href="/developers/framework/requests/">Requests</a></li><li><a href="/developers/framework/i18n/">Internationalization &amp; Localization</a></li></ul></li><li><a href="/developers/community/">Community</a></li><li><a href="/developers/installation/">Installation</a></li><li><a href="/developers/locales/">Locales</a></li><li><a href="/developers/plugins/">Plugins</a><ul class="nav nav-stacked"><li><a href="/developers/plugins/quickstart/">Plugin Quickstart</a></li></ul></li><li><a href="/developers/routes/">Routes</a></li><li><a href="/developers/tools/">Developer Tools</a></li><li><a href="/developers/importing/">Importing</a><ul class="nav nav-stacked"><li><a href="/developers/importing/build/">Building new porters</a></li><li><a href="/developers/importing/porter/">Vanilla Porter</a></li><li><a href="/developers/importing/support/">Supported platforms</a></li></ul></li></ul></li><li class=active><a href="/features/">Features</a><ul class="nav nav-stacked"><li><a href="/features/categories/">Categories</a></li><li><a href="/features/comments/">Universal Comments</a></li><li><a href="/features/emails/">Emails</a></li><li class=active><a href="/features/embedding/">Embedding</a><ul class="nav nav-stacked"><li class=active><a href="/features/embedding/advanced/">Advanced Embedding</a></li></ul></li><li><a href="/features/emoji/">Emoji</a></li><li><a href="/features/roles-permissions/">Roles &amp; Permissions</a><ul class="nav nav-stacked"><li><a href="/features/roles-permissions/default-role-types/">Default Role Types</a></li></ul></li><li><a href="/features/sso/">Single Sign-On (SSO)</a><ul class="nav nav-stacked"><li><a href="/features/sso/jsconnect/">SSO with jsConnect</a><ul class="nav nav-stacked"><li><a href="/features/sso/jsconnect/embed/">Embedded</a></li><li><a href="/features/sso/jsconnect/overview/">Technical Overview</a></li><li><a href="/features/sso/jsconnect/seamless/">Seamless Setup</a></li></ul></li><li><a href="/features/sso/oauth/">SSO with OAuth</a></li><li><a href="/features/sso/saml/">SSO with SAML</a></li></ul></li><li><a href="/features/wordpress/">WordPress Integration</a><ul class="nav nav-stacked"><li><a href="/features/wordpress/using-comments/">Using Comments</a></li><li><a href="/features/wordpress/wishlist/">WishList Integration</a></li></ul></li></ul></li><li><a href="/theming/">Theming</a><ul class="nav nav-stacked"><li><a href="/theming/css/">Theming CSS</a></li><li><a href="/theming/hooks/">Theming Hooks</a></li><li><a href="/theming/quickstart/">Theming Quickstart</a></li><li><a href="/theming/smarty/">Smarty</a><ul class="nav nav-stacked"><li><a href="/theming/smarty/conditionals/">Smarty Conditionals</a></li><li><a href="/theming/smarty/functions/">Smarty Functions</a><ul class="nav nav-stacked"><li><a href="/theming/smarty/functions/asset/">{asset}</a></li><li><a href="/theming/smarty/functions/text/">{text}</a></li><li><a href="/theming/smarty/functions/custom-menu/">{custom_menu}</a></li><li><a href="/theming/smarty/functions/event/">{event}</a></li><li><a href="/theming/smarty/functions/i18n/">{t}</a></li><li><a href="/theming/smarty/functions/include-file/">{include_file}</a></li><li><a href="/theming/smarty/functions/link/">{link}</a></li><li><a href="/theming/smarty/functions/breadcrumbs/">{breadcrumbs}</a></li><li><a href="/theming/smarty/functions/mobile-logo/">{mobile_logo}</a></li><li><a href="/theming/smarty/functions/module/">{module}</a></li><li><a href="/theming/smarty/functions/page-links/">Page Links</a></li><li><a href="/theming/smarty/functions/permission/">{permission}</a></li><li><a href="/theming/smarty/functions/pocket/">{pocket}</a></li><li><a href="/theming/smarty/functions/searchbox/">{searchbox}</a></li><li><a href="/theming/smarty/functions/logo/">{logo}</a></li></ul></li><li><a href="/theming/smarty/modifiers/">Smarty Modifiers</a></li></ul></li><li><a href="/theming/themeoptions/">Theme Options</a></li><li><a href="/theming/views/">Theming Views</a></li></ul></li></ul><p class=hidden-xs><a class=text-muted href=#top>^ Back to top</a></p></nav></div><div class=col-sm-9><div class="edit-doc pull-right hidden-xs"><a class="btn btn-default btn-xs" href=https://github.com/vanilla/vanilladocs/edit/master/docs/features/embedding/advanced.html.md>Improve document</a></div><article class=markdown-body role=article><h1 id=advanced-embedding>Advanced Embedding</h1><p>The advanced embedding technique is for developers who require programmatic interaction between the Vanilla iframe and their parent window. It employs <a href="http://easyxdm.net/wp/">easyXDM</a> and a special container layer to achieve this. It requires a more in-depth setup than Vanilla&#39;s basic embed solution.</p><h2 id=setting-up-advanced-embedding>Setting Up Advanced Embedding</h2><p>Enable forum embedding via the Dashboard. Then set <code>Garden.Embed.Allow</code> to <code>2</code> in your config. <em>Cloud customers will have this done by support staff</em>.</p><ol><li>Include easyXDM: <code>/js/easyXDM/easyXDM.min.js</code></li><li>Include Vanilla&#39;s advanced embed script: <code>/js/vanilla.embed.js</code></li><li>Create a div to contain Vanilla and give it an ID.</li><li>Call <code>Vanilla.embed({options})</code>.</li></ol><h3 id=options>Options</h3><p>Vanilla.embed() takes an associative array of options:</p><p><code>root</code> <strong>Required</strong>. The root url of your Vanilla forum. Example: <a href=http://community.yoursite.com>http://community.yoursite.com</a></p><p><code>container</code> <strong>Required</strong>. The ID or DOM element of the container for Vanilla.</p><p><code>initialPath</code> <strong>Optional</strong>. The initial path to browse to when embedding the forum. Our example below demonstrates using the hash part of the URL to automatically set this, e.g. <code>site.com/embedpage#/categories/some-category</code>.</p><p><code>sso</code> <strong>Optional</strong>. An SSO string that will automatically sign the user into Vanilla. See <a href=https://github.com/vanillaforums/jsConnectPHP/blob/master/functions.jsconnect.php#L130>our example code</a>.</p><p><code>autoStart</code> <strong>Optional</strong>. Whether or not to start the embed when <code>embed()</code> is called. If this is false then you must call embed.start() to start the embed. Default: <code>true</code>.</p><p><code>onReady()</code> <strong>Optional</strong>. A callback function to call when the embed is ready.</p><p><code>notifyLocation(path)</code> <strong>Optional</strong>. A function that will be called when the url of the embedded iframe changes. You can use this callback to update your history. By default this function adds the path as the current location&#39;s # fragment. Combine this with initialPath to implement your own custom history.</p><p><code>height(x)</code> <strong>Optional</strong>. A function that is called to set the height of the embedded iframe. If you override this method then you can access the embedded iframe using <code>this.iframe</code>.</p><h3 id=methods>Methods</h3><p><code>start()</code> Start the embed. Only call this method if you set autoStart to <code>false</code>.</p><p><code>setLocation(path)</code> Manually set the location of the embedded iframe. Just specify the path and not the full domain of the embed.</p><h2 id=custom-callbacks>Custom Callbacks</h2><p>The embed API allows custom Javascript to be called between the parent and child iframes.</p><h2 id=exposing-a-method-to-vanilla>Exposing a method to Vanilla</h2><p>You can expose a method to the child iframe with the following code:</p><pre class=highlight><code class="hljs javascript">Vanilla.embed.fn.functionName = <span class=hljs-function><span class=hljs-keyword>function</span><span class=hljs-params>(args,...)</span> </span>{ … }
</code></pre><p>The embed requires all functions on both sides to be explicitly registered to prevent a third party hijacking the embed and calling functions with unforeseen consequences.</p><p>Vanilla embed supports a callback function on both ends of the embed. If you want to support a callback function then declare it as the last argument of your function. When the other endpoint of the embed calls your function using <code>callRemote()</code> it can then specify a callback and the framework will handle calling the callback across the domain.</p><h2 id=calling-a-method-in-vanilla>Calling a method in Vanilla</h2><p>You can call a method in Vanilla with the following code:</p><pre class=highlight><code class="hljs javascript">Vanilla.embed.callRemote(<span class=hljs-string>"functionName"</span>, args [, callback]);
</code></pre><p>If you supply the callback argument to <code>callRemote()</code> then it will be supplied as the last argument to the remote function. It is the remote function’s job to call the function. Keep in mind that using <code>call()</code>, <code>apply()</code>, etc. to set a context for the function will not work as a context cannot be passed across the domain.</p><h3 id=functions-you-can-call-on-vanilla>Functions you can call on Vanilla</h3><p><code>Vanilla.embed.signout()</code> Calling this function will sign the user out of Vanilla. It won’t refresh the page so you may want to do that afterwards.</p><h2 id=example-implementation>Example implementation</h2><pre class=highlight><code class="hljs xml"><span class=hljs-doctype>&lt;!DOCTYPE html&gt;</span>
<span class=hljs-tag>&lt;<span class=hljs-title>html</span>&gt;</span>
   <span class=hljs-tag>&lt;<span class=hljs-title>head</span>&gt;</span>
         <span class=hljs-tag>&lt;<span class=hljs-title>meta</span> <span class=hljs-attribute>charset</span>=<span class=hljs-value>"utf-8"</span>&gt;</span>
         <span class=hljs-tag>&lt;<span class=hljs-title>title</span>&gt;</span>Sample Embed<span class=hljs-tag>&lt;/<span class=hljs-title>title</span>&gt;</span>
         <span class=hljs-tag>&lt;<span class=hljs-title>style</span>&gt;</span><span class=css>
         <span class=hljs-tag>body</span> <span class=hljs-rules>{
            <span class=hljs-rule><span class=hljs-attribute>margin</span>:<span class=hljs-value> <span class=hljs-number>0</span></span></span>;
         <span class=hljs-rule>}</span></span>
         <span class=hljs-id>#embedVanilla</span> <span class=hljs-tag>iframe</span> <span class=hljs-rules>{
            <span class=hljs-rule><span class=hljs-attribute>width</span>:<span class=hljs-value> <span class=hljs-number>100%</span></span></span>;
         <span class=hljs-rule>}</span></span>
      </span><span class=hljs-tag>&lt;/<span class=hljs-title>style</span>&gt;</span>
      <span class=hljs-tag>&lt;<span class=hljs-title>script</span> <span class=hljs-attribute>type</span>=<span class=hljs-value>"text/javascript"</span> <span class=hljs-attribute>src</span>=<span class=hljs-value>"js/easyXDM/easyXDM.min.js"</span>&gt;</span><span class=javascript></span><span class=hljs-tag>&lt;/<span class=hljs-title>script</span>&gt;</span>
      <span class=hljs-tag>&lt;<span class=hljs-title>script</span> <span class=hljs-attribute>type</span>=<span class=hljs-value>"text/javascript"</span> <span class=hljs-attribute>src</span>=<span class=hljs-value>"js/vanilla.embed.js"</span>&gt;</span><span class=javascript></span><span class=hljs-tag>&lt;/<span class=hljs-title>script</span>&gt;</span>
   <span class=hljs-tag>&lt;/<span class=hljs-title>head</span>&gt;</span>
   <span class=hljs-tag>&lt;<span class=hljs-title>body</span> <span class=hljs-attribute>style</span>=<span class=hljs-value>"background: #ff6600;"</span>&gt;</span>
      <span class=hljs-tag>&lt;<span class=hljs-title>div</span> <span class=hljs-attribute>style</span>=<span class=hljs-value>"height: 50px"</span>&gt;</span>foo<span class=hljs-tag>&lt;/<span class=hljs-title>div</span>&gt;</span>
      <span class=hljs-tag>&lt;<span class=hljs-title>div</span> <span class=hljs-attribute>id</span>=<span class=hljs-value>"embedVanilla"</span>&gt;</span><span class=hljs-tag>&lt;/<span class=hljs-title>div</span>&gt;</span>
      <span class=hljs-tag>&lt;<span class=hljs-title>script</span> <span class=hljs-attribute>type</span>=<span class=hljs-value>"text/javascript"</span>&gt;</span><span class=javascript>
        <span class=hljs-comment>// Help older browsers parse JSON.</span>
        easyXDM.DomHelper.requiresJSON(<span class=hljs-string>"js/easyXDM/json2.js"</span>);

        <span class=hljs-keyword>var</span> vanillaEmbed = <span class=hljs-keyword>new</span> Vanilla.embed({
          <span class=hljs-comment>// The element or its ID.</span>
          container: <span class=hljs-string>"embedVanilla"</span>,
          <span class=hljs-comment>// This is the location of the forum.</span>
          root: <span class=hljs-string>"http://yoursite.local"</span>,
          <span class=hljs-comment>// initial path, please start it with a "/"</span>
          initialPath: <span class=hljs-built_in>window</span>.location.hash.substring(<span class=hljs-number>1</span>),
          onReady: <span class=hljs-function><span class=hljs-keyword>function</span><span class=hljs-params>()</span> </span>{
            <span class=hljs-comment>// A lot of the functions need to be done after the embed is ready.</span>

            <span class=hljs-comment>// This how you set the location of the embedded frame.</span>
            <span class=hljs-comment>// vanillaEmbed.setLocation('/categories');</span>
          }
        });
      </span><span class=hljs-tag>&lt;/<span class=hljs-title>script</span>&gt;</span>
   <span class=hljs-tag>&lt;/<span class=hljs-title>body</span>&gt;</span>
<span class=hljs-tag>&lt;/<span class=hljs-title>html</span>&gt;</span>
</code></pre></article></div></div></div><footer class="footer js-footer"><div class=jumbotron><div class=container><div class=row><div class=col-sm-6><h3><a href=http://vanillaforums.com>Cloud Hosting</a></h3><p><strong>We believe that online communities should be intuitive, engaging and true to your brand.</strong> Vanilla allows you to create a customized community that rewards positive participation, automatically curates content and lets members drive moderation.</p></div><div class=col-sm-6><h3><a href=http://vanillaforums.org>Open Source</a></h3><p>Vanilla provides cloud and open source community forum software that powers discussion forums on more than 700,000 sites. Built for flexibility and integration, <strong>Vanilla is the best, most powerful community solution in the world.</strong></p></div></div></div></div><div class=footer-copyright><div class=container><p class=text-center>Copyright &copy; 2009-2016 <a href=http://vanillaforums.com>Vanilla Forums Inc.</a> All rights reserved.</p><ul class="list-inline text-center hidden-xs"><li><a href=http://docs.vanillaforums.com>Docs</a></li><li><a href=http://blog.vanillaforums.com>Blog</a></li><li><a href=http://vanillaforums.com>Cloud</a></li><li><a href=http://vanillaforums.org>Community</a></li><li><a href=https://github.com/vanilla>GitHub</a></li><li><a href=https://github.com/vanilla/vanilla/issues>Issues</a></li></ul></div></div></footer><script src=/search.3a9fe9d0.json id=search-manifest type=application/json></script><script src=/assets/main.c4227c36.js></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-12713112-1","auto"),ga("send","pageview");</script>